# Copyright 2023 Akretion - Raphaël Valyi <raphael.valyi@akretion.com>
# License LGPL-3.0 or later (https://www.gnu.org/licenses/lgpl-3.0.en.html).
# Generated by https://github.com/akretion/xsdata-odoo
#
import textwrap
from odoo import fields, models
from .tipos import (
    TIdeEmpregador,
    TIdeEventoFolhaSemRetificacao,
)

__NAMESPACE__ = "http://www.esocial.gov.br/schema/evt/evtReabreEvPer/v_S_01_01_00"


class ESocial(models.AbstractModel):
    "S-1298 - Reabertura dos Eventos Periódicos"
    _description = textwrap.dedent("    %s" % (__doc__,))
    _name = "eso.11.esocial"
    _inherit = "spec.mixin.eso"
    _binding_type = "ESocial"

    eso11_evtReabreEvPer = fields.Many2one(
        comodel_name="eso.11.evtreabreevper",
        string="Evento Reabertura dos Eventos Periódicos",
        xsd_required=True,
        help=(
            "Evento Reabertura dos Eventos Periódicos.\nCHAVE_GRUPO: {Id}\nREG"
            "RA:REGRA_ENVIO_PROC_FECHAMENTO\nREGRA:REGRA_EVE_FOPAG_SIMPLIFICAD"
            "O\nREGRA:REGRA_EXISTE_INFO_EMPREGADOR\nREGRA:REGRA_REABERTURA_VAL"
            "IDA_PERIODO_APURACAO\nREGRA:REGRA_VALIDA_EMPREGADOR"
        ),
    )


class EvtReabreEvPer(models.AbstractModel):
    """Evento Reabertura dos Eventos Periódicos.
    CHAVE_GRUPO: {Id}
    REGRA:REGRA_ENVIO_PROC_FECHAMENTO
    REGRA:REGRA_EVE_FOPAG_SIMPLIFICADO
    REGRA:REGRA_EXISTE_INFO_EMPREGADOR
    REGRA:REGRA_REABERTURA_VALIDA_PERIODO_APURACAO
    REGRA:REGRA_VALIDA_EMPREGADOR"""

    _description = textwrap.dedent("    %s" % (__doc__,))
    _name = "eso.11.evtreabreevper"
    _inherit = "spec.mixin.eso"
    _binding_type = "ESocial.EvtReabreEvPer"

    eso11_ideEvento = fields.Many2one(
        comodel_name="eso.11.tideeventofolhasemretificacao",
        string="ideEvento",
        xsd_required=True,
        xsd_type="T_ideEvento_folha_sem_retificacao",
    )

    eso11_ideEmpregador = fields.Many2one(
        comodel_name="eso.11.tideempregador",
        string="ideEmpregador",
        xsd_required=True,
        xsd_type="T_ideEmpregador",
    )

    eso11_Id = fields.Char(string="Id", xsd_required=True, xsd_type="TS_Id")
