# Copyright 2023 Akretion - Raphaël Valyi <raphael.valyi@akretion.com>
# License LGPL-3.0 or later (https://www.gnu.org/licenses/lgpl-3.0.en.html).
# Generated by https://github.com/akretion/xsdata-odoo
#
import textwrap
from odoo import fields, models
from .tipos import (
    TSESTCIVIL,
    TSRACACOR,
    TSSEXO,
    TSSIMNAO,
    TEnderecoBrasil,
    TEnderecoExterior,
    TIdeEmpregadorCnpj,
    TIdeEventoTrabPj,
)

__NAMESPACE__ = "http://www.esocial.gov.br/schema/evt/evtCdBenefAlt/v_S_01_01_00"


class ESocial(models.AbstractModel):
    "S-2405 - Cadastro de Beneficiário - Entes Públicos - Alteração"
    _description = textwrap.dedent("    %s" % (__doc__,))
    _name = "eso.11.esocial"
    _inherit = "spec.mixin.eso"
    _binding_type = "ESocial"

    eso11_evtCdBenefAlt = fields.Many2one(
        comodel_name="eso.11.evtcdbenefalt",
        string="Evento Cadastro de Beneficiário",
        xsd_required=True,
        help=(
            "Evento Cadastro de Beneficiário - "
            "Alteração\nDESCRICAO_COMPLETA:Evento Cadastro de Beneficiário - "
            "Entes Públicos - Alteração.\nCHAVE_GRUPO: {Id}\nREGRA:REGRA_ENVIO"
            "_PROC_FECHAMENTO\nREGRA:REGRA_EVENTOS_EXTEMP\nREGRA:REGRA_EVENTO_"
            "EXT_SEM_IMPACTO_FOPAG\nREGRA:REGRA_EXISTE_INFO_EMPREGADOR\nREGRA:"
            "REGRA_VALIDA_TRABALHADOR_BASE_CPF"
        ),
    )


class EvtCdBenefAlt(models.AbstractModel):
    """Evento Cadastro de Beneficiário - Alteração
    DESCRICAO_COMPLETA:Evento Cadastro de Beneficiário - Entes Públicos -
    Alteração.
    CHAVE_GRUPO: {Id}
    REGRA:REGRA_ENVIO_PROC_FECHAMENTO
    REGRA:REGRA_EVENTOS_EXTEMP
    REGRA:REGRA_EVENTO_EXT_SEM_IMPACTO_FOPAG
    REGRA:REGRA_EXISTE_INFO_EMPREGADOR
    REGRA:REGRA_VALIDA_TRABALHADOR_BASE_CPF"""

    _description = textwrap.dedent("    %s" % (__doc__,))
    _name = "eso.11.evtcdbenefalt"
    _inherit = "spec.mixin.eso"
    _binding_type = "ESocial.EvtCdBenefAlt"

    eso11_ideEvento = fields.Many2one(
        comodel_name="eso.11.tideeventotrabpj",
        string="ideEvento",
        xsd_required=True,
        xsd_type="T_ideEvento_trab_PJ",
    )

    eso11_ideEmpregador = fields.Many2one(
        comodel_name="eso.11.tideempregadorcnpj",
        string="ideEmpregador",
        xsd_required=True,
        xsd_type="T_ideEmpregador_cnpj",
    )

    eso11_ideBenef = fields.Many2one(
        comodel_name="eso.11.idebenef",
        string="Identificação do beneficiário",
        xsd_required=True,
        help="Identificação do beneficiário.\nCHAVE_GRUPO: {cpfBenef*}",
    )

    eso11_alteracao = fields.Many2one(
        comodel_name="eso.11.alteracao",
        string="Alteração de dados do beneficiário",
        xsd_required=True,
        help=("Alteração de dados do beneficiário.\nCHAVE_GRUPO: {dtAlteracao*}"),
    )

    eso11_Id = fields.Char(string="Id", xsd_required=True, xsd_type="TS_Id")


class IdeBenef(models.AbstractModel):
    """Identificação do beneficiário.
    CHAVE_GRUPO: {cpfBenef*}"""

    _description = textwrap.dedent("    %s" % (__doc__,))
    _name = "eso.11.idebenef"
    _inherit = "spec.mixin.eso"
    _binding_type = "ESocial.EvtCdBenefAlt.IdeBenef"

    eso11_cpfBenef = fields.Char(
        string="CPF do beneficiário",
        xsd_required=True,
        xsd_type="TS_cpf",
        help=(
            "CPF do beneficiário.\nValidação: Deve ser um CPF válido e "
            "cadastrado pelo órgão público declarante por meio do evento "
            "S-2400."
        ),
    )


class Alteracao(models.AbstractModel):
    """Alteração de dados do beneficiário.
    CHAVE_GRUPO: {dtAlteracao*}"""

    _description = textwrap.dedent("    %s" % (__doc__,))
    _name = "eso.11.alteracao"
    _inherit = "spec.mixin.eso"
    _binding_type = "ESocial.EvtCdBenefAlt.Alteracao"

    eso11_dtAlteracao = fields.Date(
        string="a data de alteração",
        xsd_required=True,
        xsd_type="xs:date",
        help=(
            "a data de alteração.\nValidação: Deve ser posterior à data de "
            "início informada no evento S-2400 e igual ou anterior à data "
            "atual."
        ),
    )

    eso11_dadosBenef = fields.Many2one(
        comodel_name="eso.11.dadosbenef",
        string="Dados do beneficiário",
        xsd_required=True,
    )


class DadosBenef(models.AbstractModel):
    "Dados do beneficiário."
    _description = textwrap.dedent("    %s" % (__doc__,))
    _name = "eso.11.dadosbenef"
    _inherit = "spec.mixin.eso"
    _binding_type = "ESocial.EvtCdBenefAlt.Alteracao.DadosBenef"

    eso11_nmBenefic = fields.Char(
        string="nmBenefic", xsd_required=True, xsd_type="TS_nmBenefic"
    )

    eso11_sexo = fields.Selection(
        TS_SEXO, string="Sexo do beneficiário", xsd_required=True, xsd_type="TS_sexo"
    )

    eso11_racaCor = fields.Selection(
        TS_RACACOR, string="racaCor", xsd_required=True, xsd_type="TS_racaCorBenef"
    )

    eso11_estCiv = fields.Selection(
        TS_ESTCIVIL, string="estCiv", xsd_type="TS_estCivilBenef"
    )

    eso11_incFisMen = fields.Selection(
        TS_SIM_NAO, string="incFisMen", xsd_required=True, xsd_type="TS_incFisMen"
    )

    eso11_endereco = fields.Many2one(
        comodel_name="eso.11.endereco",
        string="Endereço do beneficiário",
        xsd_required=True,
        help=(
            "Endereço do beneficiário.\nDESCRICAO_COMPLETA:Grupo de "
            "informações do endereço do beneficiário."
        ),
    )

    eso11_dependente = fields.One2many(
        "eso.11.dependente",
        "eso11_dependente_dadosBenef_id",
        string="Informações dos dependentes",
        help=(
            "Informações dos dependentes.\nCHAVE_GRUPO: {tpDep}, {nmDep}, "
            "{dtNascto}\nCONDICAO_GRUPO: OC"
        ),
    )


class Endereco(models.AbstractModel):
    """Endereço do beneficiário.
    DESCRICAO_COMPLETA:Grupo de informações do endereço do beneficiário."""

    _description = textwrap.dedent("    %s" % (__doc__,))
    _name = "eso.11.endereco"
    _inherit = "spec.mixin.eso"
    _binding_type = "ESocial.EvtCdBenefAlt.Alteracao.DadosBenef.Endereco"

    eso11_brasil = fields.Many2one(
        comodel_name="eso.11.tenderecobrasil",
        string="brasil",
        choice="endereco",
        xsd_choice_required=True,
        xsd_type="T_endereco_brasil",
    )

    eso11_exterior = fields.Many2one(
        comodel_name="eso.11.tenderecoexterior",
        string="exterior",
        choice="endereco",
        xsd_choice_required=True,
        xsd_type="T_endereco_exterior",
    )


class Dependente(models.AbstractModel):
    """Informações dos dependentes.
    CHAVE_GRUPO: {tpDep}, {nmDep}, {dtNascto}
    CONDICAO_GRUPO: OC"""

    _description = textwrap.dedent("    %s" % (__doc__,))
    _name = "eso.11.dependente"
    _inherit = "spec.mixin.eso"
    _binding_type = "ESocial.EvtCdBenefAlt.Alteracao.DadosBenef.Dependente"

    eso11_tpDep = fields.Char(string="tpDep", xsd_required=True, xsd_type="TS_tpDep")

    eso11_nmDep = fields.Char(string="nmDep", xsd_required=True, xsd_type="TS_nmDep")

    eso11_dtNascto = fields.Date(
        string="dtNascto", xsd_required=True, xsd_type="TS_dtNascto"
    )

    eso11_cpfDep = fields.Char(string="cpfDep", xsd_type="TS_cpfDepBenef")

    eso11_sexoDep = fields.Selection(
        TS_SEXO, string="Sexo do dependente", xsd_required=True, xsd_type="TS_sexo"
    )

    eso11_depIRRF = fields.Selection(
        TS_SIM_NAO, string="depIRRF", xsd_required=True, xsd_type="TS_depIRRF_Benef"
    )

    eso11_incFisMen = fields.Selection(
        TS_SIM_NAO, string="incFisMen", xsd_required=True, xsd_type="TS_incFisMenDep"
    )
