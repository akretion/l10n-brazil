# Copyright 2023 Akretion - Raphaël Valyi <raphael.valyi@akretion.com>
# License LGPL-3.0 or later (https://www.gnu.org/licenses/lgpl-3.0.en.html).
# Generated by https://github.com/akretion/xsdata-odoo
#
import textwrap
from odoo import fields, models
from .tipos import (
    TIdeEmpregadorExclusao,
    TIdeEventoExclusaoProcTrab,
)

__NAMESPACE__ = "http://www.esocial.gov.br/schema/evt/evtExcProcTrab/v_S_01_01_00"


class ESocial(models.AbstractModel):
    "S-3500 - Exclusão de Eventos - Processo Trabalhista"
    _description = textwrap.dedent("    %s" % (__doc__,))
    _name = "eso.11.esocial"
    _inherit = "spec.mixin.eso"
    _binding_type = "ESocial"

    eso11_evtExcProcTrab = fields.Many2one(
        comodel_name="eso.11.evtexcproctrab",
        string="Evento Exclusão",
        xsd_required=True,
        help=(
            "Evento Exclusão\nDESCRICAO_COMPLETA:Evento Exclusão de Eventos - "
            "Processo Trabalhista.\nCHAVE_GRUPO: {Id}\nREGRA:REGRA_ENVIO_PROC_"
            "FECHAMENTO\nREGRA:REGRA_EXISTE_INFO_EMPREGADOR\nREGRA:REGRA_VALID"
            "A_EMPREGADOR"
        ),
    )


class EvtExcProcTrab(models.AbstractModel):
    """Evento Exclusão
    DESCRICAO_COMPLETA:Evento Exclusão de Eventos - Processo Trabalhista.
    CHAVE_GRUPO: {Id}
    REGRA:REGRA_ENVIO_PROC_FECHAMENTO
    REGRA:REGRA_EXISTE_INFO_EMPREGADOR
    REGRA:REGRA_VALIDA_EMPREGADOR"""

    _description = textwrap.dedent("    %s" % (__doc__,))
    _name = "eso.11.evtexcproctrab"
    _inherit = "spec.mixin.eso"
    _binding_type = "ESocial.EvtExcProcTrab"

    eso11_ideEvento = fields.Many2one(
        comodel_name="eso.11.tideeventoexclusaoproctrab",
        string="ideEvento",
        xsd_required=True,
        xsd_type="T_ideEvento_exclusao_proc_trab",
    )

    eso11_ideEmpregador = fields.Many2one(
        comodel_name="eso.11.tideempregadorexclusao",
        string="ideEmpregador",
        xsd_required=True,
        xsd_type="T_ideEmpregador_exclusao",
    )

    eso11_infoExclusao = fields.Many2one(
        comodel_name="eso.11.infoexclusao",
        string="Informação do evento que será excluído",
        xsd_required=True,
        help=(
            "Informação do evento que será excluído\nDESCRICAO_COMPLETA:Grupo "
            "que identifica o evento objeto da exclusão."
        ),
    )

    eso11_Id = fields.Char(string="Id", xsd_required=True, xsd_type="TS_Id")


class InfoExclusao(models.AbstractModel):
    """Informação do evento que será excluído
    DESCRICAO_COMPLETA:Grupo que identifica o evento objeto da exclusão."""

    _description = textwrap.dedent("    %s" % (__doc__,))
    _name = "eso.11.infoexclusao"
    _inherit = "spec.mixin.eso"
    _binding_type = "ESocial.EvtExcProcTrab.InfoExclusao"

    eso11_tpEvento = fields.Char(string="tpEvento", xsd_required=True)

    eso11_nrRecEvt = fields.Char(
        string="o número do recibo do evento",
        xsd_required=True,
        xsd_type="TS_nrRecibo",
        help=(
            "o número do recibo do evento que será excluído.\nValidação: O "
            "recibo deve ser relativo ao mesmo tipo de evento indicado em "
            "{tpEvento}(./tpEvento)."
        ),
    )

    eso11_ideProcTrab = fields.Many2one(
        comodel_name="eso.11.ideproctrab",
        string="Identificação do processo",
        xsd_required=True,
        help=(
            "Identificação do processo, do trabalhador e do período de "
            "apuração.\nDESCRICAO_COMPLETA:Identificação do processo, do "
            "trabalhador e do período a que se refere o evento que será "
            "excluído."
        ),
    )


class IdeProcTrab(models.AbstractModel):
    """Identificação do processo, do trabalhador e do período de apuração.
    DESCRICAO_COMPLETA:Identificação do processo, do trabalhador e do período a que
    se refere o evento que será excluído."""

    _description = textwrap.dedent("    %s" % (__doc__,))
    _name = "eso.11.ideproctrab"
    _inherit = "spec.mixin.eso"
    _binding_type = "ESocial.EvtExcProcTrab.InfoExclusao.IdeProcTrab"

    eso11_nrProcTrab = fields.Char(
        string="Número do processo trabalhista",
        xsd_required=True,
        xsd_type="TS_nrProcTrab",
        help=(
            "Número do processo trabalhista, da ata ou número de identificação"
            " da conciliação.\nValidação: Deve ser o mesmo número do processo "
            "informado no evento objeto da exclusão."
        ),
    )

    eso11_cpfTrab = fields.Char(
        string="o número do CPF do trabalhador",
        xsd_type="TS_cpf",
        help=(
            "o número do CPF do trabalhador.\nValidação: Preenchimento "
            "obrigatório e exclusivo se {tpEvento}(../tpEvento) = [S-2500]. "
            "Deve ser o mesmo CPF informado no evento S-2500 objeto da "
            "exclusão."
        ),
    )

    eso11_perApurPgto = fields.Char(
        string="Mês/ano em que é devida a obrigação",
        xsd_type="TS_periodo_mensal",
        help=(
            "Mês/ano em que é devida a obrigação de pagar a parcela prevista "
            "no acordo/sentença.\nValidação: Preenchimento obrigatório e "
            "exclusivo se {tpEvento}(../tpEvento) = [S-2501]. Deve ser o mesmo"
            " período informado no evento S-2501 objeto da exclusão."
        ),
    )
